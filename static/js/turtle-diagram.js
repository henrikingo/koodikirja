$(function() {
  var turtleDiagrams = {
    suunnat1: {
      height: 300,
      width: 400,
      offsetY: 50,
      commands: [{"key":"spin","args":[360,10]},{"key":"rt","args":[0]},{"key":"fd","args":[120]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"rt","args":[0]},{"key":"fd","args":[20]},{"key":"lt","args":[0]},{"key":"pendown","args":[]},{"key":"text","args":["FD 100"]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[140]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[90]},{"key":"fd","args":[120]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[90]},{"key":"penup","args":[]},{"key":"rt","args":[0]},{"key":"fd","args":[20]},{"key":"lt","args":[0]},{"key":"pendown","args":[]},{"key":"text","args":["LT 90"]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[20]},{"key":"rt","args":[90]},{"key":"fd","args":[120]},{"key":"pendown","args":[]},{"key":"rt","args":[0]},{"key":"fd","args":[120]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"rt","args":[90]},{"key":"penup","args":[]},{"key":"rt","args":[0]},{"key":"fd","args":[20]},{"key":"lt","args":[0]},{"key":"pendown","args":[]},{"key":"text","args":["RT 90"]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[20]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"penup","args":[]},{"key":"rt","args":[90]},{"key":"fd","args":[120]},{"key":"lt","args":[90]},{"key":"pendown","args":[]}]
    },
    suunnat2: {
      height: 500,
      commands: [{"key":"spin","args":[360,10]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[0]},{"key":"text","args":[0]},{"key":"rt","args":[0]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[45]},{"key":"text","args":[45]},{"key":"rt","args":[45]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[90]},{"key":"text","args":[90]},{"key":"rt","args":[90]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[135]},{"key":"text","args":[135]},{"key":"rt","args":[135]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[180]},{"key":"text","args":[180]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[225]},{"key":"text","args":[225]},{"key":"rt","args":[225]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[270]},{"key":"text","args":[270]},{"key":"rt","args":[270]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]},{"key":"rt","args":[0]},{"key":"fd","args":[200]},{"key":"rt","args":[135]},{"key":"fd","args":[10]},{"key":"rt","args":[180]},{"key":"penup","args":[]},{"key":"fd","args":[10]},{"key":"lt","args":[90]},{"key":"pendown","args":[]},{"key":"fd","args":[10]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[10]},{"key":"lt","args":[45]},{"key":"pendown","args":[]},{"key":"lt","args":[0]},{"key":"penup","args":[]},{"key":"fd","args":[20]},{"key":"lt","args":[315]},{"key":"text","args":[315]},{"key":"rt","args":[315]},{"key":"penup","args":[]},{"key":"rt","args":[180]},{"key":"fd","args":[220]},{"key":"lt","args":[180]},{"key":"pendown","args":[]},{"key":"rt","args":[45]}],
    }
  }

  $(".turtle-diagram").each(function() {
    var elem = $(this)
    var id = elem.attr("data-id")
    var diagram = turtleDiagrams[id]
    var turtle = Turtle(elem, diagram.width || 640, diagram.height || 500)
    var drawn = false
    whenInView(elem, function(inView) {
      if (inView && !drawn) {
        drawn = true
        if (diagram.offsetY) {
          turtle.penup()
          turtle.rt(180)
          turtle.fd(diagram.offsetY)
          turtle.rt(180)
          turtle.pendown()
        }
        var calls = diagram.commands
        calls.forEach(function(call) {
          turtle[call.key].apply(turtle, call.args)
        })
      }
    })
  })
})

